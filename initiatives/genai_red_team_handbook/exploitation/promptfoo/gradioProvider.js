const { Client } = require("@gradio/client");

class GradioProvider {
    constructor(options) {
        this.providerId = options.id || "gradio";
        this.config = options.config;
    }

    id() {
        return this.providerId;
    }

    async callApi(prompt) {
        try {
            const client = await Client.connect("http://localhost:7860");
            const result = await client.predict("/chat", {
                message: prompt,
            });

            return {
                output: result.data[0],
            };
        } catch (err) {
            return {
                error: `Gradio API call failed: ${err.message}`,
            };
        }
    }
}

module.exports = GradioProvider;
